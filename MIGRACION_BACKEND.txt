=======================================================
MIGRAR DE LOCALSTORAGE A BACKEND CON API
Sistema de Suscripciones CODEXIS
=======================================================

Una vez que tengas el servidor corriendo en tu VPS con Cloudflare Tunnel,
sigue estos pasos para conectar tu PWA con el backend:

=======================================================
üìù PASO 1: OBTENER LA URL DE CLOUDFLARE
=======================================================

Despu√©s de ejecutar el tunnel en tu VPS, copia la URL que te da.
Ejemplo: https://abc-xyz-123.trycloudflare.com

=======================================================
üîß PASO 2: MODIFICAR index.html
=======================================================

En el archivo index.html, busca esta l√≠nea (alrededor de la l√≠nea 1050):

    // CONFIGURACI√ìN DEL BACKEND - Cambiar cuando tengas el servidor listo
    const API_URL = '';  // Dejar vac√≠o para usar LocalStorage

Y c√°mbiala por tu URL de Cloudflare:

    // CONFIGURACI√ìN DEL BACKEND - URL del servidor
    const API_URL = 'https://TU-URL-CLOUDFLARE.trycloudflare.com';

=======================================================
üíæ PASO 3: MIGRAR DATOS EXISTENTES
=======================================================

Si ya tienes datos en LocalStorage y quieres migrarlos al servidor:

1. Abre la consola del navegador (F12)

2. Ejecuta este c√≥digo:

```javascript
async function migrateToBackend() {
    const API_URL = 'https://TU-URL-CLOUDFLARE.trycloudflare.com';
    
    const subscriptions = JSON.parse(localStorage.getItem('subscriptions') || '[]');
    const invoices = JSON.parse(localStorage.getItem('invoices') || '[]');
    const payments = JSON.parse(localStorage.getItem('payments') || '[]');
    
    const response = await fetch(`${API_URL}/api/sync`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ subscriptions, invoices, payments })
    });
    
    const result = await response.json();
    console.log('‚úÖ Migraci√≥n completada:', result);
}

migrateToBackend();
```

=======================================================
‚úÖ PASO 4: VERIFICAR QUE FUNCIONA
=======================================================

1. Recarga la p√°gina (F5)

2. Los datos ahora se sincronizar√°n autom√°ticamente con el servidor

3. Puedes verificar en la consola del navegador que aparezcan mensajes
   como "‚úÖ Datos sincronizados con el servidor"

4. Abre la app en otro dispositivo o navegador y deber√≠as ver los mismos datos

=======================================================
üîÑ MODO H√çBRIDO (LocalStorage + Backend)
=======================================================

El c√≥digo est√° dise√±ado para funcionar en modo h√≠brido:

- Si API_URL est√° vac√≠o: Solo usa LocalStorage (modo offline)
- Si API_URL tiene valor: Usa el backend pero mantiene copia en LocalStorage
  para funcionar offline y sincroniza cuando hay conexi√≥n

=======================================================
üì± VENTAJAS DEL BACKEND
=======================================================

‚úÖ Sincronizaci√≥n entre dispositivos
‚úÖ Backup autom√°tico en la nube
‚úÖ M√∫ltiples usuarios pueden acceder
‚úÖ Los datos persisten aunque borres el cach√© del navegador
‚úÖ Puedes acceder desde cualquier lugar

=======================================================
‚ö†Ô∏è IMPORTANTE
=======================================================

- La URL de Cloudflare Tunnel gratuita cambia cada vez que reinicias el tunnel
- Para una URL permanente, necesitas configurar Cloudflare Tunnel con tu propio dominio
- Considera agregar autenticaci√≥n para proteger los datos sensibles

=======================================================
